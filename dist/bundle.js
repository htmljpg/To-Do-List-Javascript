(()=>{"use strict";var __webpack_modules__={722:()=>{eval("\n;// CONCATENATED MODULE: ./src/constants/root.js\nconst ROOT_MAIN_PAGE = document.getElementById('main-page');\n;// CONCATENATED MODULE: ./src/views/HomePage.html\n// Module\nvar code = \"<h2>Welcome, your IP is <span id=\\\"ip\\\"></span></h2>\";\n// Exports\n/* harmony default export */ const HomePage = (code);\n;// CONCATENATED MODULE: ./src/constants/api.js\nconst BASE_URL = 'http://localhost:3000/';\r\nconst IP_URL = 'https://api.ipify.org/?format=json';\n;// CONCATENATED MODULE: ./src/utils/useFetch.js\nconst useFetch = async (fetchUrl, fetchMethod, fetchBody, fetchHeaders, fetchResponseMethod) => {\r\n\r\n    const url = fetchUrl;\r\n    const method = fetchMethod ? fetchMethod : 'get';\r\n    const body = fetchBody ? JSON.stringify(fetchBody) : null;\r\n    const headers = fetchHeaders ? fetchHeaders : {\r\n        'Content-type': 'application/json'\r\n    };\r\n    \r\n    try {\r\n        const response = await fetch(url, { method, headers, body });\r\n\r\n        if (!response.ok) {\r\n            console.error(`Could not fetch ${url}, status: ${response.status}`);\r\n            return false;\r\n        }\r\n\r\n        switch(fetchResponseMethod) {\r\n            case 'text': return await response.text();\r\n            default: return await response.json();\r\n        }\r\n    } catch(error) {\r\n        console.log(error.message);\r\n        return false;\r\n    }\r\n}\r\n\r\n/* harmony default export */ const utils_useFetch = (useFetch);\n;// CONCATENATED MODULE: ./src/pages/HomePage.js\n\r\n\r\n\r\n\r\nconst HomePage_HomePage = async () => {\r\n  const divElement = document.createElement(\"div\");\r\n  divElement.innerHTML = HomePage;\r\n\r\n  const ipBlock = divElement.querySelector(\"#ip\");\r\n\r\n  const { ip } = await utils_useFetch(IP_URL);\r\n  if (ip) {\r\n    ipBlock.innerHTML = ip\r\n  } else {\r\n    ipBlock.innerHTML = 'Error';\r\n  }\r\n\r\n  return divElement;\r\n}\r\n\r\n/* harmony default export */ const pages_HomePage = (HomePage_HomePage);\n;// CONCATENATED MODULE: ./src/views/TodosPage.html\n// Module\nvar TodosPage_code = \"<div class=\\\"todos\\\"> <div class=\\\"row d-flex justify-content-between\\\"> <div class=\\\"col-auto\\\"> <h3>Add new task</h3> </div> <div class=\\\"col-auto\\\"> <button class=\\\"btn btn-primary btn-md\\\" id=\\\"add\\\" type=\\\"button\\\">+</button> </div> </div> <ul id=\\\"todos-list\\\" class=\\\"animate__animated\\\"> </ul> </div>\";\n// Exports\n/* harmony default export */ const TodosPage = (TodosPage_code);\n;// CONCATENATED MODULE: ./src/plugins/base.js\nconst $ = {};\r\n\r\n/* harmony default export */ const base = ($);\n;// CONCATENATED MODULE: ./src/plugins/modal/modal.js\n\r\n\r\nElement.prototype.appendAfter = function(element) {\r\n    element.parentNode.insertBefore(this, element.nextSibling);\r\n};\r\n\r\nfunction noop() {};\r\n\r\nfunction _footerCreateModal(buttons = []) {\r\n    if (buttons.length === 0) {\r\n        return document.createElement('div');\r\n    }\r\n\r\n    const wrap = document.createElement('div');\r\n    wrap.classList.add('modal-footer');\r\n\r\n    buttons.forEach(btn => {\r\n        const $btn = document.createElement('button');\r\n        $btn.textContent = btn.text;\r\n        $btn.classList.add('btn');\r\n        $btn.classList.add(`btn-${btn.type || 'secondary'}`);\r\n        $btn.onclick = btn.handler || noop;\r\n        btn.submitForm ? $btn.setAttribute('form', btn.submitForm) : '';\r\n\r\n        wrap.appendChild($btn);\r\n    });\r\n\r\n    return wrap;\r\n}\r\n\r\nfunction _creatModal({ title, closable, content, width, footerButtons }) {\r\n    const DEFAULT_WIDTH = '200px';\r\n    const modal = document.createElement('div');\r\n    modal.classList.add('vmodal');\r\n    modal.insertAdjacentHTML('afterbegin', `\r\n        <div class=\"modal-overlay\">\r\n            <div class=\"modal-wrapper\" data-close=\"true\">\r\n                <div class=\"modal-window\" style=\"width: ${width || DEFAULT_WIDTH};\">\r\n                    <div class=\"modal-header\">\r\n                        <span class=\"modal-title\">${title || 'Modal title'}</span>\r\n                        ${closable ? `<span class=\"modal-close\" data-close=\"true\">&times;</span>` : ''}\r\n                    </div>\r\n                    <div class=\"modal-body\" data-content>\r\n                        ${content || ''}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `);\r\n\r\n    const footer = _footerCreateModal(footerButtons);\r\n    footer.appendAfter(modal.querySelector('[data-content]'));\r\n\r\n    document.body.appendChild(modal);\r\n    return modal;\r\n}\r\n\r\nbase.modal = function(options) {\r\n    const ANIMATION_SPEED = 200;\r\n    const $modal = _creatModal(options);\r\n    let closing = false;\r\n    let destroyed = false;\r\n    \r\n    let footerBtnOKHandler = new Function;\r\n    if (options.modalName === 'alert' && options.footerButtons.type === 'primary') {\r\n        footerBtnOKHandler = options[footerButtons][handler];\r\n    }\r\n\r\n    console.log('options', options);\r\n    \r\n    \r\n\r\n    const modal = {\r\n        open() {\r\n            if (destroyed) {\r\n                return console.log('Modal is destroyed');\r\n            }\r\n            !closing && $modal.classList.add('open');\r\n            return true;\r\n        },\r\n        close() {\r\n            $modal.classList.remove('open');\r\n            $modal.classList.add('hide');\r\n            closing = true;\r\n\r\n            setTimeout(() => {\r\n                $modal.classList.remove('hide');\r\n                closing = false;\r\n                if (typeof options.onClose === 'function') {\r\n                    options.onClose();\r\n                }\r\n            }, ANIMATION_SPEED);\r\n            return true;\r\n        }\r\n    };\r\n\r\n    const listener = event => {\r\n        if (event.target.dataset.close === 'true') {\r\n            modal.close();\r\n            footerBtnOKHandler();\r\n        }\r\n    }\r\n\r\n    $modal.addEventListener('click', listener);\r\n\r\n    return Object.assign(modal, {\r\n        destroy() {\r\n            $modal.remove();\r\n            $modal.removeEventListener('click', listener);\r\n            destroyed = true;\r\n        },\r\n        setContent(html) {\r\n            $modal.querySelector('[data-content]').innerHTML = html;\r\n        }\r\n    });\r\n};\n;// CONCATENATED MODULE: ./src/plugins/modal/confirm.js\n\r\n\r\nbase.confirm = function(options) {\r\n    return new Promise((resolve, reject) => {\r\n        const modal = base.modal({\r\n            modalName: 'confirm',\r\n            title: options.title,\r\n            width: '400px',\r\n            closable: false,\r\n            content: options.content,\r\n            onClose() {\r\n                modal.destroy();\r\n            },\r\n            footerButtons: [\r\n                {text: 'Cancel', type: 'secondary', handler() {\r\n                    modal.close();\r\n                    reject();\r\n                }},\r\n                {text: 'Delete', type: 'danger', handler() {\r\n                    modal.close();\r\n                    resolve();\r\n                }},\r\n            ]\r\n        });\r\n\r\n        setTimeout(() => {\r\n            modal.open();\r\n        }, 100);\r\n    });\r\n}\n;// CONCATENATED MODULE: ./src/plugins/modal/alert.js\n\r\n\r\nbase.alert = function(options) {\r\n    return new Promise((resolve) => {\r\n        const modal = base.modal({\r\n            modalName: 'alert',\r\n            title: options.title,\r\n            width: '400px',\r\n            closable: false,\r\n            content: options.content,\r\n            onClose() {\r\n                modal.destroy();\r\n            },\r\n            footerButtons: [\r\n                {text: 'OK', type: 'primary', handler() {\r\n                    modal.close();\r\n                    resolve();\r\n                }},\r\n            ]\r\n        });\r\n\r\n        setTimeout(() => {\r\n            modal.open();\r\n        }, 100);\r\n    });\r\n}\n;// CONCATENATED MODULE: ./src/plugins/index.js\n\r\n\r\n\r\n\n;// CONCATENATED MODULE: ./src/utils/useAnim.js\nconst useAnim = (callback, block, delay = 100, animIn = 'animate__fadeIn', animOut = 'animate__fadeOut') => {\r\n    animOut && block.classList.add(animOut);\r\n    animIn && block.classList.remove(animIn);\r\n\r\n    setTimeout(function() {\r\n        animOut && block.classList.remove(animOut);\r\n        animIn && block.classList.add(animIn);\r\n\r\n        callback();\r\n    }, delay);\r\n}\r\n\r\n/* harmony default export */ const utils_useAnim = (useAnim);\n;// CONCATENATED MODULE: ./src/pages/TodosPage.js\n\r\n\r\n\r\n\r\n\r\n\r\nlet addModal = addOrEdit('add');\r\n\r\nfunction addOrEdit (type, data = {}) {\r\n    console.log('data', data);\r\n    \r\n    let modalTitle = '';\r\n    let btnPrimary = {};\r\n    let formId = '';\r\n\r\n    if (type === 'add') {\r\n        modalTitle = 'Add new task';\r\n        btnPrimary = {text: 'Add', type: 'primary', handler() {\r\n                \r\n        }, submitForm: 'addTodo'};\r\n        formId = 'addTodo';\r\n    }\r\n    if (type === 'edit') {\r\n        modalTitle = `Edit task`;\r\n        btnPrimary = {text: 'Edit', type: 'primary', handler() {\r\n                \r\n        }, submitForm: 'editTodo'};\r\n        formId = 'editTodo';\r\n    }\r\n\r\n\r\n    const modal = base.modal({\r\n        title: modalTitle,\r\n        closable: true,\r\n        width: '400px',\r\n        content: `\r\n            <form id=${formId}>\r\n                <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Title</label>\r\n                    <input type=\"text\" name=\"title\" value=\"${type === 'edit' ? data.title : ''}\" class=\"form-control\" required>\r\n                </div>\r\n                <div class=\"mb-3\">\r\n                    <label class=\"form-label\">Description</label>\r\n                    <textarea class=\"form-control\" rows=\"3\" name=\"description\" required>${type === 'edit' ? data.description : ''}</textarea>\r\n                </div>\r\n            </form>\r\n        `,\r\n        footerButtons: [\r\n            btnPrimary,\r\n            {text: 'Cancel', type: 'danger', handler() {\r\n                modal.close();\r\n            }}\r\n        ]\r\n    });\r\n\r\n    return modal;\r\n}\r\n\r\n\r\nfunction todoToHTML (todoList, { id, title, description }, withoutAnim) {\r\n    todoList.innerHTML = '';\r\n    const html = `\r\n        <li class=\"todo-item animate__animated\">\r\n            <div class=\"row d-flex justify-content-between\">\r\n                <div class=\"col-auto flex-grow-1\">\r\n                    <h3>${title}</h3>\r\n                    <p>${description}</p>\r\n                </div>\r\n                <div class=\"col-auto\">\r\n                    <button class=\"btn btn-md btn-primary edit\" data-title=\"${title}\" data-id=\"${id}\">\r\n                        <i class=\"fa fa-edit\"></i>\r\n                    </button>\r\n                    <button class=\"btn btn-md btn-danger delete\" data-title=\"${title}\" data-id=\"${id}\">\r\n                        <i class=\"fa fa-trash\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    `;\r\n\r\n    if (withoutAnim) {\r\n        todoList.insertAdjacentHTML('beforeend', html)\r\n    } else {\r\n        utils_useAnim(() => todoList.insertAdjacentHTML('beforeend', html), todoList)\r\n    }\r\n}\r\n\r\nasync function getAllTodos(todoList, withoutAnim) {\r\n    const response = await utils_useFetch(BASE_URL + 'tasks');\r\n    \r\n\r\n    if (response) {\r\n        response.length > 0 ? response.forEach(todo => todoToHTML(todoList, todo, withoutAnim)) : todoList.innerHTML = 'empty';\r\n    }\r\n}\r\n\r\nfunction getData(form) {\r\n    const title = form.title.value;\r\n    const description = form.description.value;\r\n\r\n    const formData = {\r\n        title,\r\n        description,\r\n    }\r\n\r\n    form.reset();\r\n    \r\n    return formData;\r\n}\r\n\r\nasync function addTodo(e, todoList) {\r\n    e.preventDefault();\r\n    const formData = getData(e.currentTarget);\r\n    \r\n    const response = await utils_useFetch(BASE_URL + 'tasks', 'post', formData);\r\n\r\n    responseCheckAndInfo(response, 'Add', `Task <b>${response.title}</b> added successfully!`, 'add', '');\r\n\r\n    getAllTodos(todoList);\r\n}\r\n\r\nasync function editTodo(e, todoList, id, modalBlock) {\r\n    console.log('id', e);\r\n    e.preventDefault();\r\n    const formData = getData(e.currentTarget);\r\n\r\n    const response = await utils_useFetch(BASE_URL + `tasks/${id}`, 'PUT', formData);\r\n\r\n    responseCheckAndInfo(response, 'Edit', `Task <b>${response.title}</b> edited successfully!`, 'edit', '', modalBlock);\r\n\r\n    getAllTodos(todoList);\r\n}\r\n\r\nasync function deleteTodo(todoId, todoTitle, elementParent, todoList) {\r\n    const response = await utils_useFetch(BASE_URL + `tasks/${todoId}`, 'delete');\r\n    \r\n    responseCheckAndInfo(response, 'Remove', `Task <b>${todoTitle}</b> was successfully deleted!`, 'delete', elementParent, \"\", todoList);\r\n}\r\n\r\nfunction responseCheckAndInfo(response, title, content, type, elementParent, modalBlock, todoList) {\r\n\r\n    if (response) {\r\n\r\n        if (type == 'add') {\r\n            addModal.close();\r\n        }\r\n\r\n        if (type == 'edit') {\r\n            modalBlock.destroy();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            const alert = base.alert({\r\n                title,\r\n                content,\r\n            })\r\n                .then(() => {\r\n                    if (type === 'delete') {\r\n                        utils_useAnim(() => elementParent.remove(), elementParent, 500, null, \"animate__bounceOutRight\");\r\n                        setTimeout(() => {\r\n                            getAllTodos(todoList, true);\r\n                        }, 700);\r\n                    }\r\n                })\r\n            \r\n            \r\n        }, 200);\r\n\r\n    } else {\r\n        const errorInfo = base.alert({\r\n            title: `Error`,\r\n            content: 'Something went wrong. Please try again later!',\r\n        });\r\n\r\n        if (type == 'add') {\r\n            addModal.close();\r\n        }\r\n\r\n        setTimeout(() => {\r\n            errorInfo.open();\r\n        }, 200);\r\n    }\r\n}\r\n\r\nconst TodosPage_TodosPage = async () => {\r\n  const divElement = document.createElement(\"div\");\r\n  divElement.innerHTML = TodosPage;\r\n  let todoList = divElement.querySelector('#todos-list');\r\n  const addTodoForm = document.getElementById('addTodo');\r\n  let editModal = new Function;\r\n  \r\n  todoList.addEventListener('click', (e) => {\r\n    const target = e.target;\r\n\r\n    if (\r\n        (target.classList.contains('delete') || target.parentElement.classList.contains('delete')) &&\r\n        (target.dataset.id || target.parentElement.dataset.id)\r\n    ) {\r\n        const id = +target.dataset.id || +target.parentElement.dataset.id;\r\n        const title = target.dataset.title || target.parentElement.dataset.title;\r\n\r\n        base.confirm({\r\n            title: 'Are you sure ?',\r\n            content: `You delete <b>${title}</b> task`,\r\n        })\r\n            .then(() => {\r\n                deleteTodo(id, title, target.closest('.todo-item'), todoList);\r\n            })\r\n            .catch(() => {});\r\n    }\r\n\r\n    if (\r\n        (target.classList.contains('edit') || target.parentElement.classList.contains('edit')) &&\r\n        (target.dataset.id || target.parentElement.dataset.id)\r\n    ) {\r\n        const id = +target.dataset.id || +target.parentElement.dataset.id;\r\n        const title = target.dataset.title || target.parentElement.dataset.title;\r\n\r\n        (async () => {\r\n            const response = await utils_useFetch(BASE_URL + `tasks/${id}`, 'get');\r\n\r\n            const {\r\n                title,\r\n                description\r\n            } = response;\r\n            \r\n            if (response) {\r\n                editModal = addOrEdit('edit', { title, description });\r\n                editModal.open();\r\n                const editTodoForm = document.getElementById('editTodo');\r\n                editTodoForm.addEventListener('submit', (e) => editTodo(e, todoList, id, editModal));\r\n            }\r\n        })();\r\n    }\r\n  });\r\n  \r\n  const addBtn = divElement.querySelector('#add');\r\n  addBtn.addEventListener('click', () => {\r\n    addModal.open();\r\n  });\r\n  await getAllTodos(todoList);\r\n\r\n  addTodoForm.addEventListener('submit', (e) => addTodo(e, todoList));\r\n  \r\n\r\n  return divElement;\r\n};\r\n\r\n/* harmony default export */ const pages_TodosPage = (TodosPage_TodosPage);\r\n\n;// CONCATENATED MODULE: ./src/views/NotFoundPage.html\n// Module\nvar NotFoundPage_code = \"<h2>404</h2>\";\n// Exports\n/* harmony default export */ const NotFoundPage = (NotFoundPage_code);\n;// CONCATENATED MODULE: ./src/pages/NotFoundPage.js\n\r\n\r\nconst NotFoundPage_NotFoundPage = () => {\r\n  const divElement = document.createElement(\"div\");\r\n  divElement.innerHTML = NotFoundPage;\r\n  \r\n\r\n  return divElement;\r\n}\r\n\r\n/* harmony default export */ const pages_NotFoundPage = (NotFoundPage_NotFoundPage);\r\n\n;// CONCATENATED MODULE: ./src/pages/index.js\n\r\n\r\n\r\n\r\nconst pages = {\r\n    HomePage: pages_HomePage,\r\n    TodosPage: pages_TodosPage,\r\n    NotFound: pages_NotFoundPage,\r\n};\r\n\r\n/* harmony default export */ const src_pages = (pages);\r\n\n;// CONCATENATED MODULE: ./src/router/index.js\n\r\n\r\n\r\n\r\nconst router = async (route) => {\r\n    ROOT_MAIN_PAGE.innerHTML = '';\r\n\r\n    route = route === '' ? '#/' : route;\r\n    \r\n\r\n    switch(route) {\r\n        case '#/': {\r\n            return ROOT_MAIN_PAGE.appendChild(await src_pages.HomePage());\r\n        }\r\n        case '#/todos':\r\n            return ROOT_MAIN_PAGE.appendChild(await src_pages.TodosPage());\r\n        default:\r\n            return ROOT_MAIN_PAGE.appendChild(src_pages.NotFound());\r\n    }\r\n    \r\n}\r\n\r\n\n;// CONCATENATED MODULE: ./src/main.js\n\r\n\r\n\r\n\r\n\r\n\r\nconst init = async () => {\r\n    utils_useAnim(() => router(window.location.hash), ROOT_MAIN_PAGE);\r\n\r\n    window.addEventListener('hashchange', () => {\r\n        utils_useAnim(() => router(window.location.hash), ROOT_MAIN_PAGE)\r\n    });\r\n};\r\n\r\nwindow.addEventListener('load', init);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsRUFBQzs7O0FDeFB6QjtBQUNBLElBQUksaUJBQUk7QUFDUjtBQUNBLG1EQUFlLGlCQUFJLEU7O0FDSDJCO0FBQzlDO0FBQ0EsTUFBTSx5QkFBWTtBQUNsQjtBQUNBLHlCQUF5QixZQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBZSx5QkFBWSxFQUFDOzs7QUNWTTtBQUNFO0FBQ0U7QUFDdEM7QUFDQTtBQUNBLFlBQVk7QUFDWixhQUFhO0FBQ2IsWUFBWTtBQUNaO0FBQ0E7QUFDQSxnREFBZSxLQUFLLEVBQUM7OztBQ1Y4QjtBQUNaO0FBQ1Y7QUFDN0I7QUFDQTtBQUNBLElBQUksd0JBQXdCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiwwQkFBMEIsT0FBTyxrQkFBYztBQUNsRTtBQUNBO0FBQ0EsbUJBQW1CLDBCQUEwQixPQUFPLG1CQUFlO0FBQ25FO0FBQ0EsbUJBQW1CLDBCQUEwQixDQUFDLGtCQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBOzs7QUNyQmtDO0FBQ0k7QUFDWTtBQUNsRDtBQUNxQjtBQUNyQjtBQUNBO0FBQ0EsSUFBSSxhQUFPLE9BQU8sTUFBTSx3QkFBd0IsY0FBYztBQUM5RDtBQUNBO0FBQ0EsUUFBUSxhQUFPLE9BQU8sTUFBTSx3QkFBd0IsY0FBYztBQUNsRSxLQUFLO0FBQ0w7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3BhLXZhbmlsbGFqcy8uL3NyYy9jb25zdGFudHMvcm9vdC5qcz9jYTk4Iiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvdmlld3MvSG9tZVBhZ2UuaHRtbD82MzM5Iiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvY29uc3RhbnRzL2FwaS5qcz9jOTI3Iiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvdXRpbHMvdXNlRmV0Y2guanM/MjZmNyIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3BhZ2VzL0hvbWVQYWdlLmpzPzM2MzEiLCJ3ZWJwYWNrOi8vc3BhLXZhbmlsbGFqcy8uL3NyYy92aWV3cy9Ub2Rvc1BhZ2UuaHRtbD8yZTE2Iiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvcGx1Z2lucy9iYXNlLmpzPzFiYjEiLCJ3ZWJwYWNrOi8vc3BhLXZhbmlsbGFqcy8uL3NyYy9wbHVnaW5zL21vZGFsL21vZGFsLmpzPzkzNGYiLCJ3ZWJwYWNrOi8vc3BhLXZhbmlsbGFqcy8uL3NyYy9wbHVnaW5zL21vZGFsL2NvbmZpcm0uanM/ZmY2YyIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3BsdWdpbnMvbW9kYWwvYWxlcnQuanM/ZTdhYSIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3BsdWdpbnMvaW5kZXguanM/NjkxMiIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3V0aWxzL3VzZUFuaW0uanM/M2E0MyIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3BhZ2VzL1RvZG9zUGFnZS5qcz9iMDM3Iiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvdmlld3MvTm90Rm91bmRQYWdlLmh0bWw/OGM2OCIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3BhZ2VzL05vdEZvdW5kUGFnZS5qcz83ZjJkIiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvcGFnZXMvaW5kZXguanM/NDU3MCIsIndlYnBhY2s6Ly9zcGEtdmFuaWxsYWpzLy4vc3JjL3JvdXRlci9pbmRleC5qcz9hMThjIiwid2VicGFjazovL3NwYS12YW5pbGxhanMvLi9zcmMvbWFpbi5qcz81NmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBST09UX01BSU5fUEFHRSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluLXBhZ2UnKTsiLCIvLyBNb2R1bGVcbnZhciBjb2RlID0gXCI8aDI+V2VsY29tZSwgeW91ciBJUCBpcyA8c3BhbiBpZD1cXFwiaXBcXFwiPjwvc3Bhbj48L2gyPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJleHBvcnQgY29uc3QgQkFTRV9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwLyc7XHJcbmV4cG9ydCBjb25zdCBJUF9VUkwgPSAnaHR0cHM6Ly9hcGkuaXBpZnkub3JnLz9mb3JtYXQ9anNvbic7IiwiY29uc3QgdXNlRmV0Y2ggPSBhc3luYyAoZmV0Y2hVcmwsIGZldGNoTWV0aG9kLCBmZXRjaEJvZHksIGZldGNoSGVhZGVycywgZmV0Y2hSZXNwb25zZU1ldGhvZCkgPT4ge1xyXG5cclxuICAgIGNvbnN0IHVybCA9IGZldGNoVXJsO1xyXG4gICAgY29uc3QgbWV0aG9kID0gZmV0Y2hNZXRob2QgPyBmZXRjaE1ldGhvZCA6ICdnZXQnO1xyXG4gICAgY29uc3QgYm9keSA9IGZldGNoQm9keSA/IEpTT04uc3RyaW5naWZ5KGZldGNoQm9keSkgOiBudWxsO1xyXG4gICAgY29uc3QgaGVhZGVycyA9IGZldGNoSGVhZGVycyA/IGZldGNoSGVhZGVycyA6IHtcclxuICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7IG1ldGhvZCwgaGVhZGVycywgYm9keSB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgZmV0Y2ggJHt1cmx9LCBzdGF0dXM6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2goZmV0Y2hSZXNwb25zZU1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlICd0ZXh0JzogcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VGZXRjaDsiLCJpbXBvcnQgdmlldyBmcm9tIFwiLi4vdmlld3MvSG9tZVBhZ2UuaHRtbFwiO1xyXG5pbXBvcnQgeyBJUF9VUkwgfSBmcm9tICcuLi9jb25zdGFudHMvYXBpJztcclxuaW1wb3J0IHVzZUZldGNoIGZyb20gXCIuLi91dGlscy91c2VGZXRjaFwiO1xyXG5cclxuY29uc3QgSG9tZVBhZ2UgPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2RWxlbWVudC5pbm5lckhUTUwgPSB2aWV3O1xyXG5cclxuICBjb25zdCBpcEJsb2NrID0gZGl2RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2lwXCIpO1xyXG5cclxuICBjb25zdCB7IGlwIH0gPSBhd2FpdCB1c2VGZXRjaChJUF9VUkwpO1xyXG4gIGlmIChpcCkge1xyXG4gICAgaXBCbG9jay5pbm5lckhUTUwgPSBpcFxyXG4gIH0gZWxzZSB7XHJcbiAgICBpcEJsb2NrLmlubmVySFRNTCA9ICdFcnJvcic7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZGl2RWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSG9tZVBhZ2U7IiwiLy8gTW9kdWxlXG52YXIgY29kZSA9IFwiPGRpdiBjbGFzcz1cXFwidG9kb3NcXFwiPiA8ZGl2IGNsYXNzPVxcXCJyb3cgZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuXFxcIj4gPGRpdiBjbGFzcz1cXFwiY29sLWF1dG9cXFwiPiA8aDM+QWRkIG5ldyB0YXNrPC9oMz4gPC9kaXY+IDxkaXYgY2xhc3M9XFxcImNvbC1hdXRvXFxcIj4gPGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi1tZFxcXCIgaWQ9XFxcImFkZFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIj4rPC9idXR0b24+IDwvZGl2PiA8L2Rpdj4gPHVsIGlkPVxcXCJ0b2Rvcy1saXN0XFxcIiBjbGFzcz1cXFwiYW5pbWF0ZV9fYW5pbWF0ZWRcXFwiPiA8L3VsPiA8L2Rpdj5cIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiY29uc3QgJCA9IHt9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgJDsiLCJpbXBvcnQgJCBmcm9tICcuLi9iYXNlJztcclxuXHJcbkVsZW1lbnQucHJvdG90eXBlLmFwcGVuZEFmdGVyID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLCBlbGVtZW50Lm5leHRTaWJsaW5nKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIG5vb3AoKSB7fTtcclxuXHJcbmZ1bmN0aW9uIF9mb290ZXJDcmVhdGVNb2RhbChidXR0b25zID0gW10pIHtcclxuICAgIGlmIChidXR0b25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICB3cmFwLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWZvb3RlcicpO1xyXG5cclxuICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgIGNvbnN0ICRidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICAkYnRuLnRleHRDb250ZW50ID0gYnRuLnRleHQ7XHJcbiAgICAgICAgJGJ0bi5jbGFzc0xpc3QuYWRkKCdidG4nKTtcclxuICAgICAgICAkYnRuLmNsYXNzTGlzdC5hZGQoYGJ0bi0ke2J0bi50eXBlIHx8ICdzZWNvbmRhcnknfWApO1xyXG4gICAgICAgICRidG4ub25jbGljayA9IGJ0bi5oYW5kbGVyIHx8IG5vb3A7XHJcbiAgICAgICAgYnRuLnN1Ym1pdEZvcm0gPyAkYnRuLnNldEF0dHJpYnV0ZSgnZm9ybScsIGJ0bi5zdWJtaXRGb3JtKSA6ICcnO1xyXG5cclxuICAgICAgICB3cmFwLmFwcGVuZENoaWxkKCRidG4pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHdyYXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9jcmVhdE1vZGFsKHsgdGl0bGUsIGNsb3NhYmxlLCBjb250ZW50LCB3aWR0aCwgZm9vdGVyQnV0dG9ucyB9KSB7XHJcbiAgICBjb25zdCBERUZBVUxUX1dJRFRIID0gJzIwMHB4JztcclxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCd2bW9kYWwnKTtcclxuICAgIG1vZGFsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtd3JhcHBlclwiIGRhdGEtY2xvc2U9XCJ0cnVlXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtd2luZG93XCIgc3R5bGU9XCJ3aWR0aDogJHt3aWR0aCB8fCBERUZBVUxUX1dJRFRIfTtcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibW9kYWwtdGl0bGVcIj4ke3RpdGxlIHx8ICdNb2RhbCB0aXRsZSd9PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke2Nsb3NhYmxlID8gYDxzcGFuIGNsYXNzPVwibW9kYWwtY2xvc2VcIiBkYXRhLWNsb3NlPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCIgZGF0YS1jb250ZW50PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke2NvbnRlbnQgfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgKTtcclxuXHJcbiAgICBjb25zdCBmb290ZXIgPSBfZm9vdGVyQ3JlYXRlTW9kYWwoZm9vdGVyQnV0dG9ucyk7XHJcbiAgICBmb290ZXIuYXBwZW5kQWZ0ZXIobW9kYWwucXVlcnlTZWxlY3RvcignW2RhdGEtY29udGVudF0nKSk7XHJcblxyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XHJcbiAgICByZXR1cm4gbW9kYWw7XHJcbn1cclxuXHJcbiQubW9kYWwgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICBjb25zdCBBTklNQVRJT05fU1BFRUQgPSAyMDA7XHJcbiAgICBjb25zdCAkbW9kYWwgPSBfY3JlYXRNb2RhbChvcHRpb25zKTtcclxuICAgIGxldCBjbG9zaW5nID0gZmFsc2U7XHJcbiAgICBsZXQgZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgICBcclxuICAgIGxldCBmb290ZXJCdG5PS0hhbmRsZXIgPSBuZXcgRnVuY3Rpb247XHJcbiAgICBpZiAob3B0aW9ucy5tb2RhbE5hbWUgPT09ICdhbGVydCcgJiYgb3B0aW9ucy5mb290ZXJCdXR0b25zLnR5cGUgPT09ICdwcmltYXJ5Jykge1xyXG4gICAgICAgIGZvb3RlckJ0bk9LSGFuZGxlciA9IG9wdGlvbnNbZm9vdGVyQnV0dG9uc11baGFuZGxlcl07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ29wdGlvbnMnLCBvcHRpb25zKTtcclxuICAgIFxyXG4gICAgXHJcblxyXG4gICAgY29uc3QgbW9kYWwgPSB7XHJcbiAgICAgICAgb3BlbigpIHtcclxuICAgICAgICAgICAgaWYgKGRlc3Ryb3llZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdNb2RhbCBpcyBkZXN0cm95ZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAhY2xvc2luZyAmJiAkbW9kYWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsb3NlKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgICAgICAgICAkbW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG4gICAgICAgICAgICBjbG9zaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgIGNsb3NpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5vbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5vbkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIEFOSU1BVElPTl9TUEVFRCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgbGlzdGVuZXIgPSBldmVudCA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0LmNsb3NlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgZm9vdGVyQnRuT0tIYW5kbGVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICRtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxpc3RlbmVyKTtcclxuXHJcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihtb2RhbCwge1xyXG4gICAgICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgJG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBkZXN0cm95ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0Q29udGVudChodG1sKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb250ZW50XScpLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07IiwiaW1wb3J0ICQgZnJvbSAnLi4vYmFzZSc7XHJcblxyXG4kLmNvbmZpcm0gPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gJC5tb2RhbCh7XHJcbiAgICAgICAgICAgIG1vZGFsTmFtZTogJ2NvbmZpcm0nLFxyXG4gICAgICAgICAgICB0aXRsZTogb3B0aW9ucy50aXRsZSxcclxuICAgICAgICAgICAgd2lkdGg6ICc0MDBweCcsXHJcbiAgICAgICAgICAgIGNsb3NhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgY29udGVudDogb3B0aW9ucy5jb250ZW50LFxyXG4gICAgICAgICAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb290ZXJCdXR0b25zOiBbXHJcbiAgICAgICAgICAgICAgICB7dGV4dDogJ0NhbmNlbCcsIHR5cGU6ICdzZWNvbmRhcnknLCBoYW5kbGVyKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB9fSxcclxuICAgICAgICAgICAgICAgIHt0ZXh0OiAnRGVsZXRlJywgdHlwZTogJ2RhbmdlcicsIGhhbmRsZXIoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9fSxcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICB9KTtcclxufSIsImltcG9ydCAkIGZyb20gJy4uL2Jhc2UnO1xyXG5cclxuJC5hbGVydCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gJC5tb2RhbCh7XHJcbiAgICAgICAgICAgIG1vZGFsTmFtZTogJ2FsZXJ0JyxcclxuICAgICAgICAgICAgdGl0bGU6IG9wdGlvbnMudGl0bGUsXHJcbiAgICAgICAgICAgIHdpZHRoOiAnNDAwcHgnLFxyXG4gICAgICAgICAgICBjbG9zYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IG9wdGlvbnMuY29udGVudCxcclxuICAgICAgICAgICAgb25DbG9zZSgpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9vdGVyQnV0dG9uczogW1xyXG4gICAgICAgICAgICAgICAge3RleHQ6ICdPSycsIHR5cGU6ICdwcmltYXJ5JywgaGFuZGxlcigpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH19LFxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH0pO1xyXG59IiwiaW1wb3J0ICcuL21vZGFsL21vZGFsJztcclxuaW1wb3J0ICcuL21vZGFsL2NvbmZpcm0nO1xyXG5pbXBvcnQgJy4vbW9kYWwvYWxlcnQnO1xyXG5leHBvcnQgeyBkZWZhdWx0IH0gZnJvbSAnLi9iYXNlJzsiLCJjb25zdCB1c2VBbmltID0gKGNhbGxiYWNrLCBibG9jaywgZGVsYXkgPSAxMDAsIGFuaW1JbiA9ICdhbmltYXRlX19mYWRlSW4nLCBhbmltT3V0ID0gJ2FuaW1hdGVfX2ZhZGVPdXQnKSA9PiB7XHJcbiAgICBhbmltT3V0ICYmIGJsb2NrLmNsYXNzTGlzdC5hZGQoYW5pbU91dCk7XHJcbiAgICBhbmltSW4gJiYgYmxvY2suY2xhc3NMaXN0LnJlbW92ZShhbmltSW4pO1xyXG5cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgYW5pbU91dCAmJiBibG9jay5jbGFzc0xpc3QucmVtb3ZlKGFuaW1PdXQpO1xyXG4gICAgICAgIGFuaW1JbiAmJiBibG9jay5jbGFzc0xpc3QuYWRkKGFuaW1Jbik7XHJcblxyXG4gICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICB9LCBkZWxheSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZUFuaW07IiwiaW1wb3J0IHZpZXcgZnJvbSAnLi4vdmlld3MvVG9kb3NQYWdlLmh0bWwnO1xyXG5pbXBvcnQgJCBmcm9tICcuLi9wbHVnaW5zJztcclxuaW1wb3J0IHsgQkFTRV9VUkwgfSBmcm9tICcuLi9jb25zdGFudHMvYXBpJztcclxuaW1wb3J0IHVzZUZldGNoIGZyb20gJy4uL3V0aWxzL3VzZUZldGNoJztcclxuaW1wb3J0IHVzZUFuaW0gZnJvbSAnLi4vdXRpbHMvdXNlQW5pbSc7XHJcblxyXG5sZXQgYWRkTW9kYWwgPSBhZGRPckVkaXQoJ2FkZCcpO1xyXG5cclxuZnVuY3Rpb24gYWRkT3JFZGl0ICh0eXBlLCBkYXRhID0ge30pIHtcclxuICAgIGNvbnNvbGUubG9nKCdkYXRhJywgZGF0YSk7XHJcbiAgICBcclxuICAgIGxldCBtb2RhbFRpdGxlID0gJyc7XHJcbiAgICBsZXQgYnRuUHJpbWFyeSA9IHt9O1xyXG4gICAgbGV0IGZvcm1JZCA9ICcnO1xyXG5cclxuICAgIGlmICh0eXBlID09PSAnYWRkJykge1xyXG4gICAgICAgIG1vZGFsVGl0bGUgPSAnQWRkIG5ldyB0YXNrJztcclxuICAgICAgICBidG5QcmltYXJ5ID0ge3RleHQ6ICdBZGQnLCB0eXBlOiAncHJpbWFyeScsIGhhbmRsZXIoKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICB9LCBzdWJtaXRGb3JtOiAnYWRkVG9kbyd9O1xyXG4gICAgICAgIGZvcm1JZCA9ICdhZGRUb2RvJztcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09PSAnZWRpdCcpIHtcclxuICAgICAgICBtb2RhbFRpdGxlID0gYEVkaXQgdGFza2A7XHJcbiAgICAgICAgYnRuUHJpbWFyeSA9IHt0ZXh0OiAnRWRpdCcsIHR5cGU6ICdwcmltYXJ5JywgaGFuZGxlcigpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIH0sIHN1Ym1pdEZvcm06ICdlZGl0VG9kbyd9O1xyXG4gICAgICAgIGZvcm1JZCA9ICdlZGl0VG9kbyc7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IG1vZGFsID0gJC5tb2RhbCh7XHJcbiAgICAgICAgdGl0bGU6IG1vZGFsVGl0bGUsXHJcbiAgICAgICAgY2xvc2FibGU6IHRydWUsXHJcbiAgICAgICAgd2lkdGg6ICc0MDBweCcsXHJcbiAgICAgICAgY29udGVudDogYFxyXG4gICAgICAgICAgICA8Zm9ybSBpZD0ke2Zvcm1JZH0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5UaXRsZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cInRpdGxlXCIgdmFsdWU9XCIke3R5cGUgPT09ICdlZGl0JyA/IGRhdGEudGl0bGUgOiAnJ31cIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJlcXVpcmVkPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj5EZXNjcmlwdGlvbjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjNcIiBuYW1lPVwiZGVzY3JpcHRpb25cIiByZXF1aXJlZD4ke3R5cGUgPT09ICdlZGl0JyA/IGRhdGEuZGVzY3JpcHRpb24gOiAnJ308L3RleHRhcmVhPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICBgLFxyXG4gICAgICAgIGZvb3RlckJ1dHRvbnM6IFtcclxuICAgICAgICAgICAgYnRuUHJpbWFyeSxcclxuICAgICAgICAgICAge3RleHQ6ICdDYW5jZWwnLCB0eXBlOiAnZGFuZ2VyJywgaGFuZGxlcigpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG1vZGFsO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9kb1RvSFRNTCAodG9kb0xpc3QsIHsgaWQsIHRpdGxlLCBkZXNjcmlwdGlvbiB9LCB3aXRob3V0QW5pbSkge1xyXG4gICAgdG9kb0xpc3QuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBjb25zdCBodG1sID0gYFxyXG4gICAgICAgIDxsaSBjbGFzcz1cInRvZG8taXRlbSBhbmltYXRlX19hbmltYXRlZFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1hdXRvIGZsZXgtZ3Jvdy0xXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzPiR7dGl0bGV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICA8cD4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1hdXRvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tbWQgYnRuLXByaW1hcnkgZWRpdFwiIGRhdGEtdGl0bGU9XCIke3RpdGxlfVwiIGRhdGEtaWQ9XCIke2lkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tbWQgYnRuLWRhbmdlciBkZWxldGVcIiBkYXRhLXRpdGxlPVwiJHt0aXRsZX1cIiBkYXRhLWlkPVwiJHtpZH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2xpPlxyXG4gICAgYDtcclxuXHJcbiAgICBpZiAod2l0aG91dEFuaW0pIHtcclxuICAgICAgICB0b2RvTGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWwpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVzZUFuaW0oKCkgPT4gdG9kb0xpc3QuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBodG1sKSwgdG9kb0xpc3QpXHJcbiAgICB9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEFsbFRvZG9zKHRvZG9MaXN0LCB3aXRob3V0QW5pbSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VGZXRjaChCQVNFX1VSTCArICd0YXNrcycpO1xyXG4gICAgXHJcblxyXG4gICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmVzcG9uc2UubGVuZ3RoID4gMCA/IHJlc3BvbnNlLmZvckVhY2godG9kbyA9PiB0b2RvVG9IVE1MKHRvZG9MaXN0LCB0b2RvLCB3aXRob3V0QW5pbSkpIDogdG9kb0xpc3QuaW5uZXJIVE1MID0gJ2VtcHR5JztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGF0YShmb3JtKSB7XHJcbiAgICBjb25zdCB0aXRsZSA9IGZvcm0udGl0bGUudmFsdWU7XHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm0uZGVzY3JpcHRpb24udmFsdWU7XHJcblxyXG4gICAgY29uc3QgZm9ybURhdGEgPSB7XHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICB9XHJcblxyXG4gICAgZm9ybS5yZXNldCgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvZG8oZSwgdG9kb0xpc3QpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gZ2V0RGF0YShlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHVzZUZldGNoKEJBU0VfVVJMICsgJ3Rhc2tzJywgJ3Bvc3QnLCBmb3JtRGF0YSk7XHJcblxyXG4gICAgcmVzcG9uc2VDaGVja0FuZEluZm8ocmVzcG9uc2UsICdBZGQnLCBgVGFzayA8Yj4ke3Jlc3BvbnNlLnRpdGxlfTwvYj4gYWRkZWQgc3VjY2Vzc2Z1bGx5IWAsICdhZGQnLCAnJyk7XHJcblxyXG4gICAgZ2V0QWxsVG9kb3ModG9kb0xpc3QpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBlZGl0VG9kbyhlLCB0b2RvTGlzdCwgaWQsIG1vZGFsQmxvY2spIHtcclxuICAgIGNvbnNvbGUubG9nKCdpZCcsIGUpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBnZXREYXRhKGUuY3VycmVudFRhcmdldCk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VGZXRjaChCQVNFX1VSTCArIGB0YXNrcy8ke2lkfWAsICdQVVQnLCBmb3JtRGF0YSk7XHJcblxyXG4gICAgcmVzcG9uc2VDaGVja0FuZEluZm8ocmVzcG9uc2UsICdFZGl0JywgYFRhc2sgPGI+JHtyZXNwb25zZS50aXRsZX08L2I+IGVkaXRlZCBzdWNjZXNzZnVsbHkhYCwgJ2VkaXQnLCAnJywgbW9kYWxCbG9jayk7XHJcblxyXG4gICAgZ2V0QWxsVG9kb3ModG9kb0xpc3QpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVUb2RvKHRvZG9JZCwgdG9kb1RpdGxlLCBlbGVtZW50UGFyZW50LCB0b2RvTGlzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VGZXRjaChCQVNFX1VSTCArIGB0YXNrcy8ke3RvZG9JZH1gLCAnZGVsZXRlJyk7XHJcbiAgICBcclxuICAgIHJlc3BvbnNlQ2hlY2tBbmRJbmZvKHJlc3BvbnNlLCAnUmVtb3ZlJywgYFRhc2sgPGI+JHt0b2RvVGl0bGV9PC9iPiB3YXMgc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQhYCwgJ2RlbGV0ZScsIGVsZW1lbnRQYXJlbnQsIFwiXCIsIHRvZG9MaXN0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzcG9uc2VDaGVja0FuZEluZm8ocmVzcG9uc2UsIHRpdGxlLCBjb250ZW50LCB0eXBlLCBlbGVtZW50UGFyZW50LCBtb2RhbEJsb2NrLCB0b2RvTGlzdCkge1xyXG5cclxuICAgIGlmIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICBpZiAodHlwZSA9PSAnYWRkJykge1xyXG4gICAgICAgICAgICBhZGRNb2RhbC5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2VkaXQnKSB7XHJcbiAgICAgICAgICAgIG1vZGFsQmxvY2suZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsZXJ0ID0gJC5hbGVydCh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdkZWxldGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUFuaW0oKCkgPT4gZWxlbWVudFBhcmVudC5yZW1vdmUoKSwgZWxlbWVudFBhcmVudCwgNTAwLCBudWxsLCBcImFuaW1hdGVfX2JvdW5jZU91dFJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldEFsbFRvZG9zKHRvZG9MaXN0LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSwgMjAwKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGVycm9ySW5mbyA9ICQuYWxlcnQoe1xyXG4gICAgICAgICAgICB0aXRsZTogYEVycm9yYCxcclxuICAgICAgICAgICAgY29udGVudDogJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyIScsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09ICdhZGQnKSB7XHJcbiAgICAgICAgICAgIGFkZE1vZGFsLmNsb3NlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgZXJyb3JJbmZvLm9wZW4oKTtcclxuICAgICAgICB9LCAyMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBUb2Rvc1BhZ2UgPSBhc3luYyAoKSA9PiB7XHJcbiAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZGl2RWxlbWVudC5pbm5lckhUTUwgPSB2aWV3O1xyXG4gIGxldCB0b2RvTGlzdCA9IGRpdkVsZW1lbnQucXVlcnlTZWxlY3RvcignI3RvZG9zLWxpc3QnKTtcclxuICBjb25zdCBhZGRUb2RvRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUb2RvJyk7XHJcbiAgbGV0IGVkaXRNb2RhbCA9IG5ldyBGdW5jdGlvbjtcclxuICBcclxuICB0b2RvTGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RlbGV0ZScpIHx8IHRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlJykpICYmXHJcbiAgICAgICAgKHRhcmdldC5kYXRhc2V0LmlkIHx8IHRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuaWQpXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBpZCA9ICt0YXJnZXQuZGF0YXNldC5pZCB8fCArdGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZDtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRhcmdldC5kYXRhc2V0LnRpdGxlIHx8IHRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQudGl0bGU7XHJcblxyXG4gICAgICAgICQuY29uZmlybSh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAnQXJlIHlvdSBzdXJlID8nLFxyXG4gICAgICAgICAgICBjb250ZW50OiBgWW91IGRlbGV0ZSA8Yj4ke3RpdGxlfTwvYj4gdGFza2AsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlVG9kbyhpZCwgdGl0bGUsIHRhcmdldC5jbG9zZXN0KCcudG9kby1pdGVtJyksIHRvZG9MaXN0KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKCgpID0+IHt9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQnKSB8fCB0YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQnKSkgJiZcclxuICAgICAgICAodGFyZ2V0LmRhdGFzZXQuaWQgfHwgdGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5pZClcclxuICAgICkge1xyXG4gICAgICAgIGNvbnN0IGlkID0gK3RhcmdldC5kYXRhc2V0LmlkIHx8ICt0YXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmlkO1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGFyZ2V0LmRhdGFzZXQudGl0bGUgfHwgdGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC50aXRsZTtcclxuXHJcbiAgICAgICAgKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB1c2VGZXRjaChCQVNFX1VSTCArIGB0YXNrcy8ke2lkfWAsICdnZXQnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICBlZGl0TW9kYWwgPSBhZGRPckVkaXQoJ2VkaXQnLCB7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KTtcclxuICAgICAgICAgICAgICAgIGVkaXRNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlZGl0VG9kb0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdFRvZG8nKTtcclxuICAgICAgICAgICAgICAgIGVkaXRUb2RvRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZSkgPT4gZWRpdFRvZG8oZSwgdG9kb0xpc3QsIGlkLCBlZGl0TW9kYWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbiAgY29uc3QgYWRkQnRuID0gZGl2RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkJyk7XHJcbiAgYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgYWRkTW9kYWwub3BlbigpO1xyXG4gIH0pO1xyXG4gIGF3YWl0IGdldEFsbFRvZG9zKHRvZG9MaXN0KTtcclxuXHJcbiAgYWRkVG9kb0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IGFkZFRvZG8oZSwgdG9kb0xpc3QpKTtcclxuICBcclxuXHJcbiAgcmV0dXJuIGRpdkVsZW1lbnQ7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUb2Rvc1BhZ2U7XHJcbiIsIi8vIE1vZHVsZVxudmFyIGNvZGUgPSBcIjxoMj40MDQ8L2gyPlwiO1xuLy8gRXhwb3J0c1xuZXhwb3J0IGRlZmF1bHQgY29kZTsiLCJpbXBvcnQgdmlldyBmcm9tIFwiLi4vdmlld3MvTm90Rm91bmRQYWdlLmh0bWxcIjtcclxuXHJcbmNvbnN0IE5vdEZvdW5kUGFnZSA9ICgpID0+IHtcclxuICBjb25zdCBkaXZFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBkaXZFbGVtZW50LmlubmVySFRNTCA9IHZpZXc7XHJcbiAgXHJcblxyXG4gIHJldHVybiBkaXZFbGVtZW50O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOb3RGb3VuZFBhZ2U7XHJcbiIsImltcG9ydCBIb21lUGFnZSBmcm9tIFwiLi9Ib21lUGFnZVwiO1xyXG5pbXBvcnQgVG9kb3NQYWdlIGZyb20gXCIuL1RvZG9zUGFnZVwiO1xyXG5pbXBvcnQgTm90Rm91bmQgZnJvbSBcIi4vTm90Rm91bmRQYWdlXCI7XHJcblxyXG5jb25zdCBwYWdlcyA9IHtcclxuICAgIEhvbWVQYWdlLFxyXG4gICAgVG9kb3NQYWdlLFxyXG4gICAgTm90Rm91bmQsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwYWdlcztcclxuIiwiaW1wb3J0IHsgUk9PVF9NQUlOX1BBR0UgfSBmcm9tICcuLi9jb25zdGFudHMvcm9vdCc7XHJcbmltcG9ydCB1c2VBbmltIGZyb20gJy4uL3V0aWxzL3VzZUFuaW0nO1xyXG5pbXBvcnQgcGFnZXMgZnJvbSAnLi4vcGFnZXMnO1xyXG5cclxuY29uc3Qgcm91dGVyID0gYXN5bmMgKHJvdXRlKSA9PiB7XHJcbiAgICBST09UX01BSU5fUEFHRS5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICByb3V0ZSA9IHJvdXRlID09PSAnJyA/ICcjLycgOiByb3V0ZTtcclxuICAgIFxyXG5cclxuICAgIHN3aXRjaChyb3V0ZSkge1xyXG4gICAgICAgIGNhc2UgJyMvJzoge1xyXG4gICAgICAgICAgICByZXR1cm4gUk9PVF9NQUlOX1BBR0UuYXBwZW5kQ2hpbGQoYXdhaXQgcGFnZXMuSG9tZVBhZ2UoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJyMvdG9kb3MnOlxyXG4gICAgICAgICAgICByZXR1cm4gUk9PVF9NQUlOX1BBR0UuYXBwZW5kQ2hpbGQoYXdhaXQgcGFnZXMuVG9kb3NQYWdlKCkpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBST09UX01BSU5fUEFHRS5hcHBlbmRDaGlsZChwYWdlcy5Ob3RGb3VuZCgpKTtcclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5leHBvcnQgeyByb3V0ZXIgfTsiLCJpbXBvcnQgeyByb3V0ZXIgfSBmcm9tICcuL3JvdXRlcic7XHJcbmltcG9ydCB1c2VBbmltIGZyb20gJy4vdXRpbHMvdXNlQW5pbSc7XHJcbmltcG9ydCB7IFJPT1RfTUFJTl9QQUdFIH0gZnJvbSAnLi9jb25zdGFudHMvcm9vdCc7XHJcblxyXG5pbXBvcnQgJy4vbWFpbi5zY3NzJztcclxuXHJcbmNvbnN0IGluaXQgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB1c2VBbmltKCgpID0+IHJvdXRlcih3aW5kb3cubG9jYXRpb24uaGFzaCksIFJPT1RfTUFJTl9QQUdFKTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHtcclxuICAgICAgICB1c2VBbmltKCgpID0+IHJvdXRlcih3aW5kb3cubG9jYXRpb24uaGFzaCksIFJPT1RfTUFJTl9QQUdFKVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGluaXQpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///722\n")}},__webpack_exports__={};__webpack_modules__[722]()})();